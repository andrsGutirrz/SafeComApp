{% load static %}
<!DOCTYPE html>
<!-- saved from url=(0049)https://v4-alpha.getbootstrap.com/examples/cover/ -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="https://v4-alpha.getbootstrap.com/favicon.ico">

  <title>{{title}}</title>
  <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/cover/">

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css" integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">
  <link type="text/css" href="{% static "SafeComAppFrontend/cs/materialize.min.cs" %}" rel="stylesheet" />
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="{% static "SafeComAppFrontend/css/common.css" %}">
    <script src="{% static "SafeComAppFrontend/js/jquery.js" %}"></script>
    <script src="//cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="{% static "SafeComAppFrontend/js/index.js" %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static "SafeComAppFrontend/css/common.css" %}">
    <link rel="manifest" href="/manifest.json" />






</head>

<body class="grey lighten-4">
    <!-- top nav -->
    <nav class="z-depth-0">
      <div class="nav-wrapper container">
		  <a href="/app/"><b>SafeComApp</b></a>
        <span class="right grey-text text-darken-1">
          <i class="material-icons sidenav-trigger" data-target="side-menu">menu</i>
        </span>
      </div>
    </nav>

    <!-- side nav -->
    <div id="side-menu" class="sidenav side-menu">
      <ul class="collapsible collapsible-accordion">
		<li>
		  <div class="collapsible-header" tabindex="0"><i class="material-icons">person</i>Personas</div>
		  <div class="collapsible-body">
				<ul class="collection">
				  <li class="collection-item"> <a class="dropdown-item" href="{% url 'registroPersona' %}">Registrar Personas</a></li>
				  <li class="collection-item"><a class="dropdown-item" href="{% url 'listarPersona' %}">Consultar Personas</a></li>
				</ul>
		  </div>
		</li>
		<li>
		  <div class="collapsible-header" tabindex="0"><i class="material-icons">motorcycle</i>Vehiculos</div>
		  <div class="collapsible-body">
				<ul class="collection">
				  <li class="collection-item"><a class="dropdown-item" href="{% url 'registrarVehiculo' %}">Registrar Vehiculo</a></li>
				  <li class="collection-item"> <a class="dropdown-item" href="{% url 'listarVehiculo' %}">Consultar Vehiculos</a></li>
				</ul>
		  </div>
		</li>
		<li>
		  <div class="collapsible-header" tabindex="0"><i class="material-icons">not_interested</i>Bloqueos</div>
		  <div class="collapsible-body">
				<ul class="collection">
				  <li class="collection-item"><a class="dropdown-item" href="{% url 'registroBloqueo' %}">Registrar bloqueo</a></li>
				  <li class="collection-item"> <a class="dropdown-item" href="{% url 'listarBloqueados' %}">Consultar bloqueos</a></li>
				</ul>
		  </div>
		</li>
		<li>
		  <div class="collapsible-header"><i class="material-icons">query_builder</i>Historial de visitas</div>
		  <div class="collapsible-body">
				<ul class="collection">
				  <li class="collection-item"> <a class="dropdown-item" href="{% url 'registroVisita' %}">Registrar Visitas</a></li>
				  <li class="collection-item"> <a class="dropdown-item" href="{% url 'listarVisita' %}">Consultar Visitas</a></li>
				</ul>
		  </div>
		</li>
  </ul>
    </div>
	<div class="container">
		 {% block content %}
	{% block messages %}
		{% if success %}

			<div class="alert alert-success" role="alert">
				{{success}}
			</div>

		{% endif %}

		{% if error %}

			<div class="alert alert-danger" role="alert">
			   {{error}}
			</div>

		{% endif %}

	{% endblock %} <!-- END MESSAGES BLOCK -->


	  <!-- SOBRECARGAR EL CONTENIDO DE ESTA SECCION EN LAS DEMAS VISTAS -->
		<h1>Dashboard de visitas activas </h1>

		<!--
		<button type="button" class="btn btn-secondary">
			<a class="btn" href="{% url 'doExitVisita' %}?visitId=3">Dar salida</a>
		</button>
		-->

		 <table class="table responsive-table table-striped toDataTable">
			 <caption>Vista preliminar</caption>
            <thead class="thead-dark">
             <tr>
                 <th scope="col">Nombre completo</th>
                <th scope="col">Identificacion</th>
                <th scope="col">Placa</th>
                <th scope="col">Modelo Carro</th>
                <th scope="col">Fecha de entrada</th>
                 <th scope="col">Acciones</th>

            </tr>
            </thead>
                <tbody>
                {% for visit in visits %}
                <tr>
                    <td>{{visit.plate.owner.name}} &nbsp; {{visit.plate.owner.first_lastname}} &nbsp; {{visit.plate.owner.second_lastname}}</td>
                    <td>{{visit.plate.owner.identification}}</td>
                    <td>{{visit.plate.plate}}</td>
                    <td>{{visit.plate.model}}</td>
                    <td class="toFormatDatetime">{{visit.incoming_date}}</td>
                    <td>

                        <a class="waves-effect waves-light btn" href="{% url 'doExitVisita' %}?visitId={{visit.visit_id}}">Dar salida</a>

                    </td>
                 </tr>
                {% endfor %}
                </tbody>
        </table>

		{% endblock %}



	  </div> <!-- END Container -->

    <div class="center">
      <a
        class="btn-floating btn-small btn-large add-btn sidenav-trigger"
        data-target="side-form"
      >
		  <i class="material-icons">add</i>
      </a>
    </div>

    <!-- add recipe side nav -->

    <div id="side-form" class="sidenav side-form">
        <div class="container" >
			<hr>
			<p1><b>Registro r√°pido de visitas.</b></p1>
			<hr>
            <form action="{% url 'doregistroVisita' %}" method="POST">

                {% csrf_token %}

                <div class="form-row">
                    <div class="form-group col-md-10">
                        <label for="inputPlaca">Numero de placa</label>
                        <input class="form-control" id="inputPlaca" name="inputPlaca" type="text" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-10">
                        <label for="inputReason">Motivo</label>
                        <textarea class="form-control" id="inputReason" name="inputReason" required></textarea>
                    </div>
                </div>

                <button class="btn btn-secondary" type="submit">Registrar Visita</button>
            </form>
        </div>
    </div>
    <script src="{% static "SafeComAppFrontend/js/app.js" %}"></script>
    <script src="{% static "SafeComAppFrontend/js/ui.js" %}"></script>
    <script>
         document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.collapsible');
            var instances = M.Collapsible.init(elems, options);
          });

          // Or with jQuery

          $(document).ready(function(){
            $('.collapsible').collapsible();
          });
    </script>
  </body>

</html>


